language: python

install:
  - env | grep '^TRAVIS'
  - python -V
  - if $TEST_IDNA; then pip install idna; fi
  - python setup.py install

script:
  - ./tests/tests.py

notifications:
  email:
    on_success: never
    on_failure: change

jobs:
  include:
    - name: "CPython 3.6"
      python: 3.6
    - name: "CPython 3.6 (+ IDNA)"
      python: 3.6
      env: TEST_IDNA=true
    - name: "CPython 3.7"
      python: 3.7
    - name: "CPython 3.8"
      python: 3.8
    - name: "CPython 3.9"
      python: 3.9
    - name: "PyPy 3"
      python: pypy3
